CA2 Continous Project

Week 1 And 2 (ERD and Admin/Users, One-To-Many)

<p>Now that CA1 is done for CA2 its a continous assessment/project for Larvel (a framework for web application that programmers are able to design and moderate easily and fix issues simply)</p>

<p>CA2 includes an admin and user profile, One-To-Many Relationships (Movies and Awards) and Many-To-Many Relationships (Movies and Actors)</p>

<p>The first thing to do is to check if your ERD is correct and it makes sense, so for a one-to-many relationship being for movies and awards such as many movies can have many awards but only one designated award can be for one movie, while Many-To-Many realtionships like Movies and Actors Many Actors can be in many movies and many movies can have the same actors or many other actors. Make sure to check with your lectrer that it makes sense. Also have a pivot table for your Movie ID and Actor ID as your going to connecting those tables together to create a link</p>

<p>Before starting the other tables in your laravel web application make sure to have an admin and user. This means that the admin can access the create/edit forms and the delete button while the user cant access them but only look at the movies with a click. This is called User roles (Later on, I will explain how to let users make their own submits on the website). First things first, make a new migration (which a refresher, is use to migrate your database/ create a database onto phpmyadmin) called add_role_to_users_table. However you are NOT creating a new tablke you are adding on the role to the already made table 'users', this why we have migrations. Use --table=users this tells laravel to alter the users table. Now open the migration and add the up() and down() functions then run your migration to phpmyadmin. Then add protected fillables to your Model (Which is the heart of MVC and part of helping the databse) Users to set the roles (Make a seeder then so its able to insert the information). Now you wanna add a conditional statement to your buttons. This means if the admin is present they can see the edit/delete buttons and create form and interact with them, NOT THE USER. So use an IF statement are surround each link with an admin role (This creates a Tab). Now add a registration  to your register view to let the user indicate if they are a admin or a user. To do this create a dropdown in your register blade and add the roles user/admin to the option values. Next Alter the registered user controller (Controller Recieves and responses to any data gone through to the website and is the Brain on MVC). This will validate each of the role and save the role that is put in. So if your logged in as admin you should see the create book tab as the admin. While as User you can not access this. Make sure in your index() function in MovieController to stop user from accessing this only admins can access the forms. I also created a alert message that will pop up if the user tries to access the form</p>

<p>A One-To-Many relationship for movies is awards I chose. A Movie has many Awards but an Award belongs to One Movie, and a Award belongs to one User. The foreign key remember is to do with the many side which is the awards id. Consider the parent the Movie and the child the Award. First make a MCR for Award (php artisan make:model Award -mcr) then follow what you did first in CA1 by starting with editing the migration but add a foreignId for movie id and user id with a ON DELETE CASCADE. Then run that migration to have it on phpmyadmin. Next go to your Movie Model and add at the bottom a public function awards() that a movie($this) hasMany(Award::class), this runs the connection awards, its plural as a movie has many awards. Next go into the Award Model and add a movie() and user() function singular as a Award belongs to one Movie and One user, These are super powerful little functions, doing alot behind the scenes. Next add the route in web.php as use statements. Alter the MovieController as when i get a movie i would want to get the movie awards. So alter the show(). Alter the Movie Show Blade then to display the awards and to add a award name and opinon.</p>

<p>Now add an edit/delete function as a secondary resource for one-to-many. This is only for admin users as they can edit the users award opinions. First create the buttons in the show blade and put them at the bottom of the award display and wrap the admin role if statement around the the buttons as only the admin can access these buttons. Then create the routes in your web.php to take to the form. Alter the AwardController and add to edit() when admin clicks on the edit button it takes them to the form, the update() updates the previously store award in the database and the delete() to delete that award. Then create a view (component) for the form (Almost like the create form). Then write the edit code in the edit blade as this will show what the blade will look like. Then create the actual form, its exactly like the previous create form but with only two attributes the award_name and comment. Then test it to make sure it is working perfectly. Then i added in an alert for the award when its updated to let them know it was a success. Then to delete() do the exact same for when you want to delete a Movie except with an Award, remember to consider the foreign keys and will it do anything wrong (make sure to have it right). I also added an alert to this when the movie has been deleted successfully.</p>


Week 3 and 4 (Many-To-Many)

<p>Next is to make to many relationship in the web app and database which is movies and actors. Make sure to have a pivot table between actors and movies, make sure its all lowercase, and has a singular use of a model. First create a Model MCR for Actor and then just create a migration for actor_movie table No Mispellingsss. Next edit the actors table for migration so add in your attributes to migrate to phpmyadmin. For the Pivot table migration, make sure its all lowercase and has an uderscore between each of the words (actor_movie, movie_id) and its in alphabetical order. Also have the id foreign keys too. Then use a belongsToMany function in both the Actor and Movie Model, This will tell Laravel these have a many to many relationship and will assume it also have a pivot table too. Laravel will write the functions needed. REMEMBER- hasMany is one to many relationship as one model owns another, while belongsToMany as both sides have many of each other. The Laravel expects the name pivot to be the actor_movie.
Next make the seeder for Actor and add in the information for actors which will insert into the database. Then go into the MovieSeeder which will then can be alter to connect the use of the pivot table together for the actors to go with whatever movie they are in. Then alter the routes for actors. Now test run the migrations and have them in oredr for it to work and your seeds too.</p>

<p>Now its time to create the view/create/edit/delete for actors. Similar to the movies, I took the movies view (index/card and show/details) and added it in for the actors with their attributes and tweek it a bit.  Then create the routes for the actors in web.php. Then did the same crud as from movies just altered it for the actors to edit or create an actor, Also for delete too. Now I added a link for the movie the actor is in onto their detail pages so it shows the pivot table works for the web app.</p>

<p>Now that the website is fully complete i did my video and my final commits/comments too that needed to be done overall was pretty easy as I knew stuff going into CA2 and it was nice adding more stuff to it too.</p>